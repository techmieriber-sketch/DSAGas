<!doctype html>
<html lang="da">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Vendespil - Fisk</title>
    <style>
      :root {
        --bg: #f7fbff;
        --panel: #ffffff;
        --panel2: #f2f6ff;
        --text: #1f2430;
        --muted: #5a6270;
        --shadow: 0 20px 40px rgba(16, 24, 40, 0.18);
        --radius: 20px;
        --gap: 12px;
        --card-radius: 18px;
        --card-border: rgba(60, 80, 120, 0.18);
        --accent: #4aa3c8;
        --accent-strong: #1f7aa3;
      }

      * {
        box-sizing: border-box;
      }
      body {
        margin: 0;
        min-height: 100vh;
        display: flex;
        align-items: center;
        justify-content: center;
        background-image: linear-gradient(
            180deg,
            rgba(255, 255, 255, 0.6),
            rgba(247, 251, 255, 0.5)
          ),
          url("file:///C:/Users/mirm/.cursor/projects/c-Users-mirm-OneDrive-AARHUS-TECH-Desktop-Cursor-test-DSA-Gastronom/assets/fisk-fjerkrae-vildt-bg-16x9.png");
        background-size: cover;
        background-position: center;
        background-attachment: fixed;
        color: var(--text);
        font: 14px/1.45 system-ui, -apple-system, Segoe UI, Roboto, Helvetica,
          Arial, "Apple Color Emoji", "Segoe UI Emoji";
        padding: 22px;
      }

      .app {
        width: min(1100px, 100%);
        background: rgba(255, 255, 255, 0.88);
        border: 1px solid rgba(44, 66, 110, 0.18);
        box-shadow: var(--shadow);
        border-radius: var(--radius);
        overflow: hidden;
        backdrop-filter: blur(8px) saturate(1.05);
      }

      header {
        display: flex;
        flex-wrap: wrap;
        gap: 10px 14px;
        align-items: center;
        justify-content: space-between;
        padding: 16px 18px;
        background: linear-gradient(90deg, #e6f6ff, #dff0ff, #eaf7ff);
        border-bottom: 1px solid rgba(44, 66, 110, 0.14);
      }

      header h1 {
        margin: 0;
        font-size: 16px;
        letter-spacing: 0.2px;
        font-weight: 650;
      }

      .stats {
        display: flex;
        flex-wrap: wrap;
        align-items: center;
        gap: 10px;
        color: var(--muted);
        font-size: 13px;
      }

      .pill {
        display: inline-flex;
        align-items: center;
        gap: 8px;
        padding: 8px 10px;
        border-radius: 999px;
        background: #ffffff;
        border: 1px solid rgba(44, 66, 110, 0.18);
        box-shadow: 0 6px 14px rgba(30, 50, 90, 0.08);
      }

      .btn {
        cursor: pointer;
        border: 1px solid rgba(74, 163, 200, 0.55);
        background: linear-gradient(180deg, #6bbad9, #4aa3c8);
        color: #ffffff;
        padding: 9px 12px;
        border-radius: 12px;
        font-weight: 600;
        transition: transform 0.08s ease, background 0.15s ease,
          border-color 0.15s ease;
        user-select: none;
      }
      .btn:active {
        transform: translateY(1px);
      }
      .btn:hover {
        background: linear-gradient(180deg, #4aa3c8, #1f7aa3);
        border-color: rgba(31, 122, 163, 0.6);
      }

      .back-link {
        display: inline-flex;
        align-items: center;
        gap: 6px;
        color: var(--text);
        text-decoration: none;
        font-weight: 600;
        padding: 8px 12px;
        border-radius: 999px;
        border: 1px solid rgba(71, 95, 140, 0.25);
        background: linear-gradient(180deg, #ffffff, #e6f6ff);
        box-shadow: 0 6px 14px rgba(30, 50, 90, 0.12);
      }
      .back-link:hover {
        background: linear-gradient(180deg, #ffffff, #d9f0ff);
      }

      .content {
        padding: 16px;
      }
      .audio-note {
        margin: 0 0 12px;
        padding: 10px 12px;
        border-radius: 12px;
        background: rgba(255, 255, 255, 0.85);
        border: 1px solid rgba(44, 66, 110, 0.18);
        color: var(--text);
        font-weight: 600;
      }

      .grid {
        display: grid;
        gap: var(--gap);
        grid-template-columns: repeat(4, 1fr);
      }

      @media (min-width: 720px) {
        .grid {
          grid-template-columns: repeat(6, 1fr);
        }
      }
      @media (max-width: 420px) {
        .grid {
          grid-template-columns: repeat(3, 1fr);
        }
      }

      .card {
        position: relative;
        aspect-ratio: 1 / 1;
        border-radius: var(--card-radius);
        perspective: 1000px;
        transition: transform 0.18s ease;
      }
      .card:hover {
        transform: translateY(-3px);
      }

      .inner {
        position: absolute;
        inset: 0;
        border-radius: inherit;
        transform-style: preserve-3d;
        transition: transform 220ms ease;
        box-shadow: 0 16px 28px rgba(30, 50, 90, 0.2);
      }

      .card.flipped .inner {
        transform: rotateY(180deg);
      }
      .card.matched {
        opacity: 0.78;
      }
      .card.matched .inner {
        transform: rotateY(180deg);
      }

      .face {
        position: absolute;
        inset: 0;
        border-radius: inherit;
        backface-visibility: hidden;
        overflow: hidden;
        border: 1px solid var(--card-border);
        box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0.6);
      }

      .front {
        display: flex;
        align-items: center;
        justify-content: center;
        background-color: #0c5f87;
        background-image:
          url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='800' height='420' viewBox='0 0 800 420'><path d='M0 90 C 80 60, 160 120, 240 90 S 400 120, 480 90 S 640 120, 800 90 L800 0 L0 0 Z' fill='%23ffffff' fill-opacity='0.14'/><path d='M0 170 C 90 140, 180 200, 270 170 S 450 200, 540 170 S 710 200, 800 170 L800 0 L0 0 Z' fill='%23ffffff' fill-opacity='0.10'/><path d='M0 270 C 85 240, 170 300, 255 270 S 425 300, 510 270 S 680 300, 800 270 L800 420 L0 420 Z' fill='%23000000' fill-opacity='0.06'/></svg>"),
          radial-gradient(circle at 18% 22%, rgba(255, 255, 255, 0.18) 0 2px, rgba(255, 255, 255, 0) 3px 24px),
          radial-gradient(circle at 78% 62%, rgba(255, 255, 255, 0.14) 0 2px, rgba(255, 255, 255, 0) 3px 26px),
          linear-gradient(180deg, #2ea7d6 0%, #177aa8 55%, #0c5f87 100%);
        background-size: 240px 160px, 120px 120px, 140px 140px, 100% 100%;
        background-position: 0 0, 0 0, 30px 30px, 0 0;
        background-repeat: repeat, repeat, repeat, no-repeat;
      }
      .front::before {
        content: none;
      }

      .back {
        transform: rotateY(180deg);
        background: #ffffff;
      }

      .back img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        display: block;
        filter: saturate(1.12) contrast(1.05);
      }

      .toast {
        margin-top: 14px;
        padding: 12px 14px;
        border-radius: 14px;
        background: #ffffff;
        border: 1px solid rgba(44, 66, 110, 0.18);
        color: var(--muted);
        display: flex;
        justify-content: space-between;
        gap: 12px;
        align-items: center;
        flex-wrap: wrap;
      }

      .hidden {
        display: none !important;
      }
    </style>
  </head>
  <body>
    <div class="app">
      <header>
        <a class="back-link" href="fisk-fjerkrae-og-vildt.html">Tilbage</a>
        <h1>Vendespil</h1>

        <div class="stats">
          <div class="pill">Tr√¶k: <strong id="moves">0</strong></div>
          <div class="pill">
            Fundet: <strong id="matches">0</strong> /
            <strong id="totalPairs">0</strong>
          </div>
          <div class="pill">Tid: <strong id="time">00:00</strong></div>
          <button class="btn" id="restartBtn" type="button">
            Start forfra
          </button>
        </div>
      </header>

      <div class="content">
        <p class="audio-note">
          Spillet underst√∏ttes af lyd: N√•r du klikker p√• en brik, h√∏rer du
          navnet p√• det, der er p√• billedet.
        </p>
        <div class="grid" id="grid"></div>

        <div class="toast" id="status">
          <div id="winMsg" class="hidden">
            <strong>Du vandt!</strong> üéâ
          </div>
        </div>
      </div>
    </div>

    <script>
      const IMAGE_ITEMS = [
        { image: "Fisk/Ceviche.jpg", audio: "Fisk/Ceviche.mp3" },
        { image: "Fisk/Fiskeburger.jpg", audio: "Fisk/Fiskeburger.mp3" },
        {
          image: "Fisk/Fiskefilet med pomfritter.jpg",
          audio: "Fisk/Fiskefilet med pomfritter.mp3",
        },
        { image: "Fisk/Fiskefrikadeller.jpg", audio: "Fisk/Fiskefrikadeller.mp3" },
        { image: "Fisk/Fiskelasagne.jpg", audio: "Fisk/Fiskelasagne.mp3" },
        { image: "Fisk/Gravad laks.jpg", audio: "Fisk/Gravad laks.mp3" },
        { image: "Fisk/Hummerbisque.jpg", audio: "Fisk/Hummerbisque.mp3" },
        { image: "Fisk/Kogt hummer.jpg", audio: "Fisk/Kogt hummer.mp3" },
        {
          image:
            "Fisk/Kogt torsk med dild og med sennepssovs og runde hvide kartofler og gr√∏nne asparges.jpg",
          audio: "Fisk/Kogt torsk.mp3",
        },
        { image: "Fisk/Laksesalat.jpg", audio: "Fisk/Laksesalat.mp3" },
        {
          image: "Fisk/Marinede sild med karrysalat.png",
          audio: "Fisk/Marinede sild med karrysalat.mp3",
        },
        { image: "Fisk/Moules frites.jpg", audio: "Fisk/Moules frites.mp3" },
        { image: "Fisk/Ovnbagt laks.jpg", audio: "Fisk/Ovnbagt laks.mp3" },
        { image: "Fisk/Paella.jpg", audio: "Fisk/Paella.mp3" },
        { image: "Fisk/Rejecocktail.png", audio: "Fisk/Rejecocktail.mp3" },
        { image: "Fisk/R√∏get makrel.png", audio: "Fisk/R√∏get makrel.mp3" },
        {
          image: "Fisk/Stegt r√∏dsp√¶tte med kartofler og persillesovs.jpg",
          audio: "Fisk/Stegt r√∏dsp√¶tte.mp3",
        },
        { image: "Fisk/Stjerneskud.png", audio: "Fisk/Stjerneskud.mp3" },
        { image: "Fisk/Sushi.jpg", audio: "Fisk/Sushi.mp3" },
        { image: "Fisk/Tunmousse.png", audio: "Fisk/Tunmousse.mp3" },
        { image: "Fisk/Tunsteak.jpg", audio: "Fisk/Tunsteak.mp3" },
      ];

      const grid = document.getElementById("grid");
      const movesEl = document.getElementById("moves");
      const matchesEl = document.getElementById("matches");
      const totalPairsEl = document.getElementById("totalPairs");
      const timeEl = document.getElementById("time");
      const restartBtn = document.getElementById("restartBtn");
      const winMsg = document.getElementById("winMsg");
      const audioPlayer = new Audio();

      let deck = [];
      let first = null;
      let second = null;
      let lock = false;

      let moves = 0;
      let matches = 0;

      let timerId = null;
      let startedAt = null;

      function pad2(n) {
        return String(n).padStart(2, "0");
      }

      function formatTime(ms) {
        const totalSeconds = Math.floor(ms / 1000);
        const m = Math.floor(totalSeconds / 60);
        const s = totalSeconds % 60;
        return `${pad2(m)}:${pad2(s)}`;
      }

      function startTimerIfNeeded() {
        if (timerId) return;
        startedAt = Date.now();
        timerId = setInterval(() => {
          timeEl.textContent = formatTime(Date.now() - startedAt);
        }, 250);
      }

      function stopTimer() {
        if (!timerId) return;
        clearInterval(timerId);
        timerId = null;
      }

      function shuffle(arr) {
        for (let i = arr.length - 1; i > 0; i--) {
          const j = Math.floor(Math.random() * (i + 1));
          [arr[i], arr[j]] = [arr[j], arr[i]];
        }
        return arr;
      }

      function buildDeck() {
        const base = IMAGE_ITEMS.map((item, idx) => ({
          id: idx + 1,
          image: item.image,
          audio: item.audio,
        }));

        const doubled = [];
        for (const item of base) {
          doubled.push({ ...item, key: crypto.randomUUID() });
          doubled.push({ ...item, key: crypto.randomUUID() });
        }

        return shuffle(doubled);
      }

      function setStats() {
        movesEl.textContent = String(moves);
        matchesEl.textContent = String(matches);
        totalPairsEl.textContent = String(IMAGE_ITEMS.length);
      }

      function resetState() {
        deck = buildDeck();
        first = null;
        second = null;
        lock = false;
        moves = 0;
        matches = 0;
        winMsg.classList.add("hidden");

        stopTimer();
        timeEl.textContent = "00:00";
        startedAt = null;

        setStats();
        render();
      }

      function render() {
        grid.innerHTML = "";

        for (let i = 0; i < deck.length; i++) {
          const cardData = deck[i];

          const card = document.createElement("button");
          card.type = "button";
          card.className = "card";
          card.setAttribute("aria-label", "Kort");
          card.dataset.index = String(i);
          card.dataset.id = String(cardData.id);
          card.dataset.audio = encodeURI(cardData.audio);

          const inner = document.createElement("div");
          inner.className = "inner";

          const front = document.createElement("div");
          front.className = "face front";

          const back = document.createElement("div");
          back.className = "face back";

          const img = document.createElement("img");
          img.src = encodeURI(cardData.image);
          img.alt = "Billede";
          img.loading = "lazy";
          back.appendChild(img);

          inner.appendChild(front);
          inner.appendChild(back);
          card.appendChild(inner);

          card.addEventListener("click", onCardClick);
          grid.appendChild(card);
        }
      }

      function getCardElByIndex(index) {
        return grid.querySelector(`.card[data-index="${index}"]`);
      }

      function flip(cardEl) {
        cardEl.classList.add("flipped");
        cardEl.disabled = true;
      }

      function unflip(cardEl) {
        cardEl.classList.remove("flipped");
        cardEl.disabled = false;
      }

      function markMatched(cardEl) {
        cardEl.classList.add("matched");
        cardEl.disabled = true;
      }

      function playCardAudio(cardEl) {
        const src = cardEl.dataset.audio;
        if (!src) return;

        audioPlayer.src = src;
        audioPlayer.load();
        audioPlayer.currentTime = 0;
        audioPlayer.play().catch(() => {});
      }

      async function onCardClick(e) {
        const cardEl = e.currentTarget;
        if (lock) return;
        if (cardEl.classList.contains("matched")) return;

        startTimerIfNeeded();

        const index = Number(cardEl.dataset.index);
        const id = Number(cardEl.dataset.id);

        if (first && first.index === index) return;

        flip(cardEl);
        playCardAudio(cardEl);

        if (!first) {
          first = { index, id };
          return;
        }

        second = { index, id };
        moves += 1;
        setStats();

        if (first.id === second.id) {
          const a = getCardElByIndex(first.index);
          const b = getCardElByIndex(second.index);
          markMatched(a);
          markMatched(b);

          matches += 1;
          setStats();

          first = null;
          second = null;

          if (matches === IMAGE_ITEMS.length) {
            stopTimer();
            winMsg.classList.remove("hidden");
          }
          return;
        }

        lock = true;
        await new Promise((r) => setTimeout(r, 650));

        const a = getCardElByIndex(first.index);
        const b = getCardElByIndex(second.index);
        if (a) unflip(a);
        if (b) unflip(b);

        first = null;
        second = null;
        lock = false;
      }

      function preloadImages() {
        for (const item of IMAGE_ITEMS) {
          const im = new Image();
          im.src = encodeURI(item.image);
        }
      }

      restartBtn.addEventListener("click", resetState);

      preloadImages();
      resetState();
    </script>
  </body>
</html>
